import{c as Qe,r as m,g as Xe,j as t,H as Ye}from"./app-CPskstAv.js";import{B as Ze}from"./berkas-sidebar-Y7GCP3S4.js";import{S as Ue,A as et}from"./app-layout-CP5_9fL3.js";import{A as tt}from"./app-sidebar-header-Bhh85vkX.js";import{H as st}from"./heading-CA6ewJV4.js";import{S as at}from"./separator-DWXuXNo7.js";import{T as he,a as o,b as rt,c as d,d as it,e as lt}from"./table-kKyIuAuy.js";import{P as nt}from"./pagination-CAnHMx_a.js";import ot from"./dropdown-action-DxTueMLd.js";import{L as ct}from"./label-icon-status-B1r4PCbu.js";import{S as mt}from"./spinner-5Uae_jPp.js";import dt from"./button-update-status-U3FCXjWs.js";import ut from"./button-catatan-Dh7EpWAa.js";import ft from"./button-history-Bg0B7Uwp.js";import ht from"./dialog-form-registrasi-CDKDcsS9.js";import{D as Fe}from"./dialog-cC233ulC.js";import{B as pt}from"./button-DVnw63hJ.js";import xt from"./dialog-destroy-IU1Jj54w.js";import jt from"./dialog-detail-berkas-foRNnDZF.js";/* empty css            */import"./index-DaAGmrkb.js";import"./index-DE4duBNV.js";import"./index-AjYOHAR7.js";import"./index-B17OepHW.js";import"./index-DNPXXR2E.js";import"./index-BvaIFVjI.js";import"./Combination-awoxvRvc.js";import"./createLucideIcon-C2iFPrfA.js";import"./chevron-right-Cbo71Pe-.js";import"./check-BwigAa8m.js";import"./circle-slash-2-CgS_zfYR.js";import"./use-initials-Dg7l8F5j.js";import"./dropdown-menu-DZWxzjFm.js";import"./index-RoZEPnYD.js";import"./index-CYbzSx9y.js";import"./index-46n4DGVn.js";import"./index-Dxbdgbdu.js";import"./index-BZ2HSPaJ.js";import"./index-CTsJdAZR.js";import"./sheet-BS6VOPR3.js";import"./index-D1qKGPHi.js";import"./index-BOOka7_X.js";import"./tooltip-8RJYWOsU.js";import"./chevrons-up-down-D_QzHG1o.js";import"./index-LxfgKXR4.js";import"./loader-circle-BadshYxY.js";import"./triangle-alert-BLKHHmaF.js";import"./circle-check-D710CbHw.js";import"./dialog-catatan-view-DOXo5FsG.js";import"./checkbox-4w9MF4Kd.js";import"./index-CBGkccfa.js";import"./lembar-verifikasi-BEHg69vI.js";import"./eye-Sb-lP6bL.js";import"./dialog-konfirmasi-sp2d-BNIQeFcp.js";import"./dialog-catatan-Da2PwUZL.js";import"./input-CDsb02z_.js";import"./input-error-10G6LJWt.js";import"./trash-BjkFRwtO.js";import"./sheet-history-CmYrFtzo.js";import"./history-CAtt7JZT.js";import"./select-DwAvJLn8.js";import"./label-9WXwGcJ8.js";import"./search-CnYQp3Aq.js";const gt=pe=>{const e=Qe.c(101),{auth:i,daftarberkas:n,menuOption:r}=pe;let M;e[0]===Symbol.for("react.memo_cache_sentinel")?(M=[],e[0]=M):M=e[0];const[R,u]=m.useState(M),[xe,He]=m.useState(!1),[f,je]=m.useState(!1),[ge,Ie]=m.useState(!1),[_e,be]=m.useState("create"),[c,L]=m.useState(0),[h,Le]=m.useState(!1),[ke,We]=m.useState(null);let P;e[1]!==i.user.roleuser.instansi_id||e[2]!==i.user.roleuser.slug?(P=()=>i.user.roleuser.slug==="admin"||i.user.roleuser.slug==="verifikator"?"admin-verifikator":i.user.roleuser.instansi_id!==null?"instansi."+i.user.roleuser.instansi_id:void 0,e[1]=i.user.roleuser.instansi_id,e[2]=i.user.roleuser.slug,e[3]=P):P=e[3];const Se=P;let V;e[4]===Symbol.for("react.memo_cache_sentinel")?(V={title:"Berkas",href:"#"},e[4]=V):V=e[4];let J;e[5]!==r?(J=[V,{title:r,href:"#"}],e[5]=r,e[6]=J):J=e[6];const ye=J;let K;e[7]!==r?(K=s=>{const l=(()=>{switch(s.data.status_berka_id){case 1:return"registrasi";case 2:return"verifikasi";case 3:return"penolakan";case 4:return"sp2d";default:throw new Error("Status tidak valid, harap hubungi admin")}})()===r;u(l?A=>A.some(I=>I.id===s.berka_id)?A.map(I=>{const $e=I.riwayats.find(E=>E.id===s.data.id);let Be;if($e)Be=I.riwayats.filter(E=>E.id!==$e.id);else{const E={berka_id:s.data.berka_id,id:s.data.id,status_berka_id:s.data.status_berka_id,user_id:s.data.user_id};Be=[...I.riwayats,E]}return{...I,riwayats:Be}}):[s.data,...A]:A=>A.filter(Oe=>Oe.id!==s.berka_id))},e[7]=r,e[8]=K):K=e[8];const p=K;let O;e[9]===Symbol.for("react.memo_cache_sentinel")?(O=s=>{u(a=>a.map(l=>l.id===s.berka_id?{...l,jumlah_catatan:s.jumlah_catatan}:l))},e[9]=O):O=e[9];const Ae=O;let $;e[10]===Symbol.for("react.memo_cache_sentinel")?($=s=>{const a={hari:s.hari,hari_ke:s.hari_ke,id:s.id,jam:s.jam,jumlah_catatan:s.jumlah_catatan,kegiatan:s.kegiatan,kode:s.kode,nama_instansi:s.nama_instansi,nama_jenis_berkas:s.nama_jenis_berkas,nama_sumber_dana:s.nama_sumber_dana,no_spm:s.no_spm,riwayats:s.riwayats,status_berka_id:s.status_berka_id,tgl_registrasi:s.tgl_registrasi,tgl_spm:s.tgl_spm};u(l=>[a,...l])},e[10]=$):$=e[10];const Ee=$;let W;e[11]===Symbol.for("react.memo_cache_sentinel")?(W=s=>{u(a=>a.map(l=>l.id===s.id?{...l,hari_ke:s.hari_ke,id:s.id,kegiatan:s.kegiatan,nama_jenis_berkas:s.nama_jenis_berkas,nama_sumber_dana:s.nama_sumber_dana,no_spm:s.no_spm,tgl_spm:s.tgl_spm}:l))},e[11]=W):W=e[11];const Me=W;let q;e[12]===Symbol.for("react.memo_cache_sentinel")?(q=s=>{u(a=>a.filter(l=>l.id!==s))},e[12]=q):q=e[12];const Re=q;let z;e[13]===Symbol.for("react.memo_cache_sentinel")?(z=(s,a)=>{be(s);e:switch(s){case"update":{L(a),je(!0);break e}default:je(!0)}},e[13]=z):z=e[13];const Pe=z;let G;e[14]===Symbol.for("react.memo_cache_sentinel")?(G=s=>{L(s),Ie(!0)},e[14]=G):G=e[14];const qe=G;let Q;e[15]===Symbol.for("react.memo_cache_sentinel")?(Q=s=>{L(s),Le(!0)},e[15]=Q):Q=e[15];const ze=Q;let X;e[16]===Symbol.for("react.memo_cache_sentinel")?(X=s=>{je(s),s||(L(0),be("create"))},e[16]=X):X=e[16];const Ve=X;let Y;e[17]===Symbol.for("react.memo_cache_sentinel")?(Y=s=>{Le(s)},e[17]=Y):Y=e[17];const Je=Y;let Z;e[18]===Symbol.for("react.memo_cache_sentinel")?(Z=s=>{Ie(s),s||(L(0),be("create"))},e[18]=Z):Z=e[18];const Ke=Z;let U;e[19]===Symbol.for("react.memo_cache_sentinel")?(U=function(a,l){switch(l){case 1:return a===2?t.jsx(t.Fragment,{children:"(hari ini expired)"}):a>2?t.jsx(t.Fragment,{children:"(expired)"}):t.jsx(t.Fragment,{children:null});case 2:return a===2?t.jsx(t.Fragment,{children:"(hari ini expired)"}):a>2?t.jsx(t.Fragment,{children:"(expired)"}):t.jsx(t.Fragment,{children:null})}},e[19]=U):U=e[19];const Ge=U;let ee;e[20]!==Se?(ee=Se(),e[20]=Se,e[21]=ee):ee=e[21];let te;e[22]!==i.user.id||e[23]!==i.user.roleuser.slug||e[24]!==r||e[25]!==p?(te=s=>{const a=s.newData.user_id===i.user.id;e:switch(s.newData.info){case"berkas":{if(s.newData.action==="newBerkas")if(r==="registrasi"&&i.user.roleuser.slug==="admin"||i.user.roleuser.slug==="verifikator")Ee(s.newData.data);else return()=>s.newData.info;else s.newData.action==="updateBerkas"?Me(s.newData):s.newData.action==="destroyBerkas"?Re(s.newData.id):s.newData.action==="updateStatus"&&p(s.newData);break e}case"catatan":{if(a)return()=>a;Ae(s.newData),We(s.newData);break e}default:return()=>a}},e[22]=i.user.id,e[23]=i.user.roleuser.slug,e[24]=r,e[25]=p,e[26]=te):te=e[26],Xe(`${ee}`,"StatusBerkasEvent",te);let se;e[27]!==n?.data||e[28]!==r?(se=()=>(He(!0),r&&(u(n?.data),He(!1)),_t),e[27]=n?.data,e[28]=r,e[29]=se):se=e[29];let ae;e[30]!==r?(ae=[r],e[30]=r,e[31]=ae):ae=e[31],m.useEffect(se,ae);let x;e[32]!==c||e[33]!==f||e[34]!==_e?(x=t.jsx(ht,{modalCrud:f,addNew:Ee,dataState:c,modeType:_e,closeModal:Ve,updateBerkas:Me}),e[32]=c,e[33]=f,e[34]=_e,e[35]=x):x=e[35];let j;e[36]!==f||e[37]!==x?(j=t.jsx(Fe,{open:f,onOpenChange:Ve,modal:!0,children:x}),e[36]=f,e[37]=x,e[38]=j):j=e[38];let g;e[39]!==c||e[40]!==h?(g=t.jsx(jt,{isDialog:h,dataState:c,closeModal:Je}),e[39]=c,e[40]=h,e[41]=g):g=e[41];let _;e[42]!==h||e[43]!==g?(_=t.jsx(Fe,{open:h,onOpenChange:Je,modal:!0,children:g}),e[42]=h,e[43]=g,e[44]=_):_=e[44];let b;e[45]!==c?(b=t.jsx(xt,{dataState:c,closeModal:Ke,destroyBerkas:Re}),e[45]=c,e[46]=b):b=e[46];let k;e[47]!==ge||e[48]!==b?(k=t.jsx(Fe,{open:ge,onOpenChange:Ke,modal:!0,children:b}),e[47]=ge,e[48]=b,e[49]=k):k=e[49];let re,ie;e[50]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(Ze,{}),ie=t.jsx(Ye,{title:"Berkas"}),e[50]=re,e[51]=ie):(re=e[50],ie=e[51]);let S;e[52]!==ye?(S=t.jsx(tt,{breadcrumbs:ye,trigger:!0}),e[52]=ye,e[53]=S):S=e[53];let le;e[54]!==r?(le=r.charAt(0).toUpperCase(),e[54]=r,e[55]=le):le=e[55];const Ne=le+r.slice(1);let y;e[56]!==Ne?(y=t.jsx(st,{title:Ne,description:"Kelola data berkas pada tabel dibawah ini."}),e[56]=Ne,e[57]=y):y=e[57];let N;e[58]!==i.user.roleuser.slug||e[59]!==r?(N=i.user.roleuser.slug==="bendahara"&&r==="registrasi"?t.jsx("div",{className:"ml-auto",children:t.jsx(pt,{onClick:()=>Pe("create"),children:"Registrasi"})}):"",e[58]=i.user.roleuser.slug,e[59]=r,e[60]=N):N=e[60];let w;e[61]!==y||e[62]!==N?(w=t.jsxs("div",{className:"flex flex-1",children:[y,N]}),e[61]=y,e[62]=N,e[63]=w):w=e[63];let ne;e[64]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(at,{className:"mb-4"}),e[64]=ne):ne=e[64];let oe,ce,me;e[65]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx("div",{children:"-"}),ce=t.jsx("div",{children:"-"}),me=t.jsx("div",{children:"-"}),e[65]=oe,e[66]=ce,e[67]=me):(oe=e[65],ce=e[66],me=e[67]);let de;e[68]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsxs("div",{className:"flex items-center py-4 gap-2",children:[oe,ce,me,t.jsx("div",{className:"ml-auto",children:t.jsx("div",{className:"flex gap-2",children:"-"})})]}),e[68]=de):de=e[68];let ue;e[69]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx(rt,{children:t.jsxs(he,{children:[t.jsx(d,{className:"w-12.5 text-center",children:"No"}),t.jsx(d,{className:"w-35",children:"Waktu Registrasi"}),t.jsx(d,{className:"w-30 text-center",children:"Jenis Berkas"}),t.jsx(d,{children:"Kegiatan"}),t.jsx(d,{className:"w-52 2xl:w-80 hidden 2xl:table-cell text-center",children:"Instansi"}),t.jsx(d,{className:"w-36 text-center",children:"Sumber Dana"}),t.jsx(d,{className:"w-28 text-center",children:"Status"}),t.jsx(d,{className:"w-20 text-center",children:"Pilihan"})]})}),e[69]=ue):ue=e[69];let v;e[70]!==i.user||e[71]!==n?.meta.from||e[72]!==xe||e[73]!==R||e[74]!==ke||e[75]!==p?(v=xe?t.jsx(he,{children:t.jsx(o,{colSpan:7,children:t.jsxs("div",{className:"flex gap-2 items-center",children:[t.jsx(mt,{}),"Loading..."]})})}):R?.length>0?R?.map((s,a)=>t.jsxs(he,{children:[t.jsx(o,{className:"text-center",children:n?.meta.from?n?.meta.from+a:a+1}),t.jsxs(o,{className:"text-center",children:[s.hari,t.jsx("br",{}),s.tgl_registrasi,t.jsx("br",{}),s.jam]}),t.jsx(o,{className:"text-center",children:s.nama_jenis_berkas}),t.jsxs(o,{className:"whitespace-normal",children:[t.jsx("div",{className:"2xl:hidden md:w-100 text-muted-foreground mb-0.5 md:truncate",children:s.nama_instansi}),t.jsx("p",{className:"text-sm/6 font-medium",children:s.kegiatan}),t.jsxs("div",{className:"text-muted-foreground sm:grid sm:grid-cols-6",children:[t.jsx("div",{children:"No. Spm"}),t.jsxs("div",{className:"sm:col-span-5",children:[": ",s.no_spm]})]}),t.jsxs("div",{className:"text-muted-foreground sm:grid sm:grid-cols-6",children:[t.jsx("div",{children:"Tgl. Spm"}),t.jsxs("span",{className:"sm:col-span-2",children:[":  ",s.tgl_spm]}),t.jsx("span",{className:"sm:col-span-2 text-destructive",children:Ge(s.hari_ke,s.status_berka_id)})]}),t.jsxs("div",{className:"flex items-center pt-3",children:[t.jsxs("div",{className:"flex",children:[t.jsx(ft,{dataValue:s}),t.jsx(ut,{stateCatatans:ke,user:i.user,updateJumlahCatatan:Ae,dataValue:s})]}),t.jsx(dt,{updateStatusBerkas:p,dataValue:s})]})]}),t.jsx(o,{className:"hidden 2xl:table-cell text-center whitespace-normal",children:s.nama_instansi}),t.jsx(o,{className:"text-center",children:s.nama_sumber_dana}),t.jsx(o,{children:t.jsx(ct,{status:s.status_berka_id})}),t.jsx(o,{children:t.jsx("div",{className:"flex justify-center",children:t.jsx(ot,{openModalCrud:Pe,openDialogDestroy:qe,openDialogDetail:ze,dataValue:s.id})})})]},a)):t.jsx(he,{children:t.jsx(o,{colSpan:7,className:"font-normal",children:"Tidak ada data."})}),e[70]=i.user,e[71]=n?.meta.from,e[72]=xe,e[73]=R,e[74]=ke,e[75]=p,e[76]=v):v=e[76];let D;e[77]!==v?(D=t.jsxs(it,{children:[ue,t.jsx(lt,{children:v})]}),e[77]=v,e[78]=D):D=e[78];const we=n?.meta.from,ve=n?.meta.to,De=n?.meta.total;let T;e[79]!==we||e[80]!==ve||e[81]!==De?(T=t.jsxs("div",{className:"text-foreground text-sm",children:[we," sampai ",ve," dari total: ",De]}),e[79]=we,e[80]=ve,e[81]=De,e[82]=T):T=e[82];const Te=n?.links,Ce=n?.meta;let C;e[83]!==Te||e[84]!==Ce?(C=t.jsx("div",{className:"flex flex-1 flex-row-reverse",children:t.jsx(nt,{links:Te,meta:Ce})}),e[83]=Te,e[84]=Ce,e[85]=C):C=e[85];let B;e[86]!==T||e[87]!==C?(B=t.jsxs("div",{className:"grid items-center auto-rows-min gap-4 md:grid-cols-2 py-4",children:[T,C]}),e[86]=T,e[87]=C,e[88]=B):B=e[88];let F;e[89]!==w||e[90]!==D||e[91]!==B?(F=t.jsxs("div",{className:"min-h-screen p-4 flex-1 overflow-hidden bg-background shadow-sm rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:[w,ne,de,D,B]}),e[89]=w,e[90]=D,e[91]=B,e[92]=F):F=e[92];let H;e[93]!==S||e[94]!==F?(H=t.jsx(Ue,{className:"py-1",children:t.jsxs("main",{className:"flex flex-1 flex-col space-y-2 pl-2 mt-(--header-height) h-[calc(100svh-var(--header-height))]!",children:[S,F]})}),e[93]=S,e[94]=F,e[95]=H):H=e[95];let fe;return e[96]!==j||e[97]!==_||e[98]!==k||e[99]!==H?(fe=t.jsxs(t.Fragment,{children:[j,_,k,re,ie,H]}),e[96]=j,e[97]=_,e[98]=k,e[99]=H,e[100]=fe):fe=e[100],fe};gt.layout=pe=>t.jsx(et,{children:pe});function _t(){}export{gt as default};
