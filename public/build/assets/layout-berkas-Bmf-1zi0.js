import{c as Ge,u as Ye,j as t,L as Ze,r as k,g as Ue,H as et}from"./app-D-Kk4Z_u.js";import{S as tt,a as st,b as at,c as rt,d as it,e as lt,f as nt,A as ot}from"./app-layout-30K6gJXS.js";import{b as Se}from"./index-Bc3h0-F_.js";import{r as ct,B as dt}from"./button-BzZXSjW_.js";import{F as mt,L as ut}from"./label-icon-status-BCjz1ppj.js";import{C as ft}from"./check-DH75-WWk.js";import{C as ht,a as pt}from"./circle-slash-2-B1uPU1-q.js";import{A as xt}from"./app-sidebar-header-DRpPJ3A4.js";import{H as jt}from"./heading-CBNgn7v3.js";import{S as gt}from"./separator-D5YVm_eY.js";import{T as ye,a as g,b as _t,c as N,d as bt,e as kt}from"./table-BrHwMfcs.js";import{P as St}from"./pagination-BOPeuxpu.js";import yt from"./dropdown-action-B5Y-lSws.js";import{S as Nt}from"./spinner-AmYUnR1W.js";import wt from"./button-update-status-B0Y9VJYI.js";import vt from"./button-catatan-BB0M6zvB.js";import Dt from"./button-history-BMB1yt-c.js";import Ct from"./dialog-form-registrasi-D0SU77sB.js";import{D as Me}from"./dialog-Cy70B81N.js";import Tt from"./dialog-destroy-DvH1RMsk.js";import Bt from"./dialog-detail-berkas-CgunUb5B.js";/* empty css            */import"./use-initials-BmR7wb_L.js";import"./index-CYbHFI1W.js";import"./index-ZFGrDKp8.js";import"./index-CPfAG2wl.js";import"./dropdown-menu-rKmzISCF.js";import"./index-CLe0wdta.js";import"./index-CzqVYzBW.js";import"./index-BUHGMr7x.js";import"./index-QDj6_LmG.js";import"./index-DBHM6nos.js";import"./index-Br19meYy.js";import"./sheet-2NOeMhXd.js";import"./index-DcYXrFNC.js";import"./createLucideIcon-CXiQxMFo.js";import"./index-DQr1s7HD.js";import"./index-DW9AIAM8.js";import"./app-logo-icon-vNBdEGwk.js";import"./index-D3BYYWdm.js";import"./tooltip-BYHORf5t.js";import"./chevrons-up-down-BemONxez.js";import"./index-CDNVIVK-.js";import"./loader-circle-Cbgr5Prx.js";import"./triangle-alert-Cq4_sPiG.js";import"./dialog-catatan-view-CxTDibg2.js";import"./checkbox-GVNbUYHC.js";import"./index-yNKx5cU1.js";import"./chevron-right-BVVkIyZq.js";import"./eye-CHn2Modq.js";import"./dialog-konfirmasi-sp2d-D6_36vDc.js";import"./dialog-catatan-BB-yfC8e.js";import"./input-De8pTDR_.js";import"./input-error-B5frtn6C.js";import"./trash-eqfO9T_P.js";import"./select-DwkicLIx.js";import"./label-C4WK4etr.js";import"./search-DDeU8mYQ.js";function Ft(){const a=Ge.c(25),{url:e}=Ye(),{tahun:r}=Ye().props;let n,i,u,f,c,p,_,d;if(a[0]!==r||a[1]!==e){const y=new Date().getFullYear(),h=[{title:"Registrasi",href:Se.main({tahun:r||y,statusberkas:"registrasi"}),icon:mt},{title:"Verifikasi",href:Se.main({tahun:r||y,statusberkas:"verifikasi"}),icon:ft},{title:"Penolakan",href:Se.main({tahun:r||y,statusberkas:"penolakan"}),icon:ht},{title:"Sp2d",href:Se.main({tahun:r||y,statusberkas:"sp2d"}),icon:pt}];f=at,_="top-(--header-height) h-[calc(100svh-var(--header-height))]!",d="inset",u=rt,i=it,p="mt-2 py-0",n=lt,c=h.map(m=>t.jsx(tt,{children:t.jsx(st,{asChild:!0,isActive:e.startsWith(ct(m.href)),tooltip:{children:m.title},children:t.jsxs(Ze,{href:m.href,only:["daftarberkas","menuOption"],children:[m.icon&&t.jsx(m.icon,{}),t.jsx("span",{children:m.title})]})})},m.title)),a[0]=r,a[1]=e,a[2]=n,a[3]=i,a[4]=u,a[5]=f,a[6]=c,a[7]=p,a[8]=_,a[9]=d}else n=a[2],i=a[3],u=a[4],f=a[5],c=a[6],p=a[7],_=a[8],d=a[9];let x;a[10]!==n||a[11]!==c?(x=t.jsx(n,{children:c}),a[10]=n,a[11]=c,a[12]=x):x=a[12];let j;a[13]!==i||a[14]!==p||a[15]!==x?(j=t.jsx(i,{className:p,children:x}),a[13]=i,a[14]=p,a[15]=x,a[16]=j):j=a[16];let b;a[17]!==u||a[18]!==j?(b=t.jsx(u,{children:j}),a[17]=u,a[18]=j,a[19]=b):b=a[19];let S;return a[20]!==f||a[21]!==_||a[22]!==d||a[23]!==b?(S=t.jsx(f,{className:_,variant:d,children:b}),a[20]=f,a[21]=_,a[22]=d,a[23]=b,a[24]=S):S=a[24],S}const It=a=>{const e=Ge.c(101),{auth:r,daftarberkas:n,menuOption:i}=a;let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],e[0]=u):u=e[0];const[f,c]=k.useState(u),[p,_]=k.useState(!1),[d,x]=k.useState(!1),[j,b]=k.useState(!1),[S,y]=k.useState("create"),[h,m]=k.useState(0),[w,He]=k.useState(!1),[Ne,qe]=k.useState(null);let G;e[1]!==r.user.roleuser.instansi_id||e[2]!==r.user.roleuser.slug?(G=()=>r.user.roleuser.slug==="admin"||r.user.roleuser.slug==="verifikator"?"admin-verifikator":r.user.roleuser.instansi_id!==null?"instansi."+r.user.roleuser.instansi_id:void 0,e[1]=r.user.roleuser.instansi_id,e[2]=r.user.roleuser.slug,e[3]=G):G=e[3];const we=G;let q;e[4]===Symbol.for("react.memo_cache_sentinel")?(q={title:"Berkas",href:"#"},e[4]=q):q=e[4];let z;e[5]!==i?(z=[q,{title:i,href:"#"}],e[5]=i,e[6]=z):z=e[6];const ve=z;let Q;e[7]===Symbol.for("react.memo_cache_sentinel")?(Q=function(l,o){switch(o){case 1:return l===2?t.jsx(t.Fragment,{children:"(hari ini expired)"}):l>2?t.jsx(t.Fragment,{children:"(expired)"}):t.jsx(t.Fragment,{children:null});case 2:return l===2?t.jsx(t.Fragment,{children:"(hari ini expired)"}):l>2?t.jsx(t.Fragment,{children:"(expired)"}):t.jsx(t.Fragment,{children:null})}},e[7]=Q):Q=e[7];const ze=Q;let X;e[8]!==i?(X=s=>{const o=(()=>{switch(s.data.status_berka_id){case 1:return"registrasi";case 2:return"verifikasi";case 3:return"penolakan";case 4:return"sp2d";default:throw new Error("Status tidak valid, harap hubungi admin")}})()===i;c(o?W=>W.some(K=>K.id===s.berka_id)?W.map(K=>{const We=K.riwayats.find(Y=>Y.id===s.data.id);let Le;if(We)Le=K.riwayats.filter(Y=>Y.id!==We.id);else{const Y={berka_id:s.data.berka_id,id:s.data.id,status_berka_id:s.data.status_berka_id,user_id:s.data.user_id};Le=[...K.riwayats,Y]}return{...K,riwayats:Le}}):[s.data,...W]:W=>W.filter(Ke=>Ke.id!==s.berka_id))},e[8]=i,e[9]=X):X=e[9];const v=X;let Z;e[10]===Symbol.for("react.memo_cache_sentinel")?(Z=s=>{c(l=>l.map(o=>o.id===s.berka_id?{...o,jumlah_catatan:s.jumlah_catatan}:o))},e[10]=Z):Z=e[10];const Ae=Z;let U;e[11]===Symbol.for("react.memo_cache_sentinel")?(U=s=>{const l={hari:s.hari,hari_ke:s.hari_ke,id:s.id,jam:s.jam,jumlah_catatan:s.jumlah_catatan,kegiatan:s.kegiatan,kode:s.kode,nama_instansi:s.nama_instansi,nama_jenis_berkas:s.nama_jenis_berkas,nama_sumber_dana:s.nama_sumber_dana,no_spm:s.no_spm,riwayats:s.riwayats,status_berka_id:s.status_berka_id,tgl_registrasi:s.tgl_registrasi,tgl_spm:s.tgl_spm};c(o=>[l,...o])},e[11]=U):U=e[11];const Re=U;let ee;e[12]===Symbol.for("react.memo_cache_sentinel")?(ee=s=>{c(l=>l.map(o=>o.id===s.id?{...o,hari_ke:s.hari_ke,id:s.id,kegiatan:s.kegiatan,nama_jenis_berkas:s.nama_jenis_berkas,nama_sumber_dana:s.nama_sumber_dana,no_spm:s.no_spm,tgl_spm:s.tgl_spm}:o))},e[12]=ee):ee=e[12];const Ee=ee;let te;e[13]===Symbol.for("react.memo_cache_sentinel")?(te=s=>{c(l=>l.filter(o=>o.id!==s))},e[13]=te):te=e[13];const Pe=te;let se;e[14]===Symbol.for("react.memo_cache_sentinel")?(se=(s,l)=>{y(s);e:switch(s){case"update":{m(l),x(!0);break e}default:x(!0)}},e[14]=se):se=e[14];const Ve=se;let ae;e[15]===Symbol.for("react.memo_cache_sentinel")?(ae=s=>{m(s),b(!0)},e[15]=ae):ae=e[15];const Qe=ae;let re;e[16]===Symbol.for("react.memo_cache_sentinel")?(re=s=>{m(s),He(!0)},e[16]=re):re=e[16];const Xe=re;let ie;e[17]===Symbol.for("react.memo_cache_sentinel")?(ie=s=>{x(s),s||(m(0),y("create"))},e[17]=ie):ie=e[17];const Oe=ie;let le;e[18]===Symbol.for("react.memo_cache_sentinel")?(le=s=>{He(s)},e[18]=le):le=e[18];const $e=le;let ne;e[19]===Symbol.for("react.memo_cache_sentinel")?(ne=s=>{b(s),s||(m(0),y("create"))},e[19]=ne):ne=e[19];const Je=ne;let oe;e[20]!==we?(oe=we(),e[20]=we,e[21]=oe):oe=e[21];let ce;e[22]!==r.user.id||e[23]!==r.user.roleuser.slug||e[24]!==i||e[25]!==v?(ce=s=>{const l=s.newData.user_id===r.user.id;e:switch(s.newData.info){case"berkas":{if(s.newData.action==="newBerkas")if(i==="registrasi"&&r.user.roleuser.slug==="admin"||r.user.roleuser.slug==="verifikator")Re(s.newData.data);else return()=>s.newData.info;else s.newData.action==="updateBerkas"?Ee(s.newData):s.newData.action==="destroyBerkas"?Pe(s.newData.id):s.newData.action==="updateStatus"&&v(s.newData);break e}case"catatan":{if(l)return()=>l;Ae(s.newData),qe(s.newData);break e}default:return()=>l}},e[22]=r.user.id,e[23]=r.user.roleuser.slug,e[24]=i,e[25]=v,e[26]=ce):ce=e[26],Ue(`${oe}`,"StatusBerkasEvent",ce);let de;e[27]!==n?.data||e[28]!==i?(de=()=>(_(!0),i&&(c(n?.data),_(!1)),Lt),e[27]=n?.data,e[28]=i,e[29]=de):de=e[29];let me;e[30]!==i?(me=[i],e[30]=i,e[31]=me):me=e[31],k.useEffect(de,me);let D;e[32]!==h||e[33]!==d||e[34]!==S?(D=t.jsx(Ct,{modalCrud:d,addNew:Re,dataState:h,modeType:S,closeModal:Oe,updateBerkas:Ee}),e[32]=h,e[33]=d,e[34]=S,e[35]=D):D=e[35];let C;e[36]!==d||e[37]!==D?(C=t.jsx(Me,{open:d,onOpenChange:Oe,modal:!0,children:D}),e[36]=d,e[37]=D,e[38]=C):C=e[38];let T;e[39]!==h||e[40]!==w?(T=t.jsx(Bt,{isDialog:w,dataState:h,closeModal:$e}),e[39]=h,e[40]=w,e[41]=T):T=e[41];let B;e[42]!==w||e[43]!==T?(B=t.jsx(Me,{open:w,onOpenChange:$e,modal:!0,children:T}),e[42]=w,e[43]=T,e[44]=B):B=e[44];let F;e[45]!==h?(F=t.jsx(Tt,{dataState:h,closeModal:Je,destroyBerkas:Pe}),e[45]=h,e[46]=F):F=e[46];let I;e[47]!==j||e[48]!==F?(I=t.jsx(Me,{open:j,onOpenChange:Je,modal:!0,children:F}),e[47]=j,e[48]=F,e[49]=I):I=e[49];let ue,fe;e[50]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx(Ft,{}),fe=t.jsx(et,{title:"Berkas"}),e[50]=ue,e[51]=fe):(ue=e[50],fe=e[51]);let L;e[52]!==ve?(L=t.jsx(xt,{breadcrumbs:ve,trigger:!0}),e[52]=ve,e[53]=L):L=e[53];let he;e[54]!==i?(he=i.charAt(0).toUpperCase(),e[54]=i,e[55]=he):he=e[55];const De=he+i.slice(1);let M;e[56]!==De?(M=t.jsx(jt,{title:De,description:"Kelola data berkas pada tabel dibawah ini."}),e[56]=De,e[57]=M):M=e[57];let H;e[58]!==r.user.roleuser.slug||e[59]!==i?(H=r.user.roleuser.slug==="bendahara"&&i==="registrasi"?t.jsx("div",{className:"ml-auto",children:t.jsx(dt,{onClick:()=>Ve("create"),children:"Registrasi"})}):"",e[58]=r.user.roleuser.slug,e[59]=i,e[60]=H):H=e[60];let A;e[61]!==M||e[62]!==H?(A=t.jsxs("div",{className:"flex flex-1",children:[M,H]}),e[61]=M,e[62]=H,e[63]=A):A=e[63];let pe;e[64]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(gt,{className:"mb-4"}),e[64]=pe):pe=e[64];let xe,je,ge;e[65]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx("div",{children:"-"}),je=t.jsx("div",{children:"-"}),ge=t.jsx("div",{children:"-"}),e[65]=xe,e[66]=je,e[67]=ge):(xe=e[65],je=e[66],ge=e[67]);let _e;e[68]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsxs("div",{className:"flex items-center py-4 gap-2",children:[xe,je,ge,t.jsx("div",{className:"ml-auto",children:t.jsx("div",{className:"flex gap-2",children:"-"})})]}),e[68]=_e):_e=e[68];let be;e[69]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx(_t,{children:t.jsxs(ye,{children:[t.jsx(N,{className:"w-12.5 text-center",children:"No"}),t.jsx(N,{className:"w-35",children:"Waktu Registrasi"}),t.jsx(N,{className:"w-30 text-center",children:"Jenis Berkas"}),t.jsx(N,{children:"Kegiatan"}),t.jsx(N,{className:"w-52 2xl:w-80 hidden 2xl:table-cell text-center",children:"Instansi"}),t.jsx(N,{className:"w-36 text-center",children:"Sumber Dana"}),t.jsx(N,{className:"w-28 text-center",children:"Status"}),t.jsx(N,{className:"w-20 text-center",children:"Pilihan"})]})}),e[69]=be):be=e[69];let R;e[70]!==r.user||e[71]!==n?.meta.from||e[72]!==p||e[73]!==f||e[74]!==Ne||e[75]!==v?(R=p?t.jsx(ye,{children:t.jsx(g,{colSpan:7,children:t.jsxs("div",{className:"flex gap-2 items-center",children:[t.jsx(Nt,{}),"Loading..."]})})}):f?.length>0?f?.map((s,l)=>t.jsxs(ye,{children:[t.jsx(g,{className:"text-center",children:n?.meta.from?n?.meta.from+l:l+1}),t.jsxs(g,{className:"text-center",children:[s.hari,t.jsx("br",{}),s.tgl_registrasi,t.jsx("br",{}),s.jam]}),t.jsx(g,{className:"text-center",children:s.nama_jenis_berkas}),t.jsxs(g,{className:"whitespace-normal",children:[t.jsx("div",{className:"2xl:hidden md:w-100 text-muted-foreground mb-0.5 md:truncate",children:s.nama_instansi}),t.jsx("p",{children:s.kegiatan}),t.jsxs("div",{className:"text-muted-foreground sm:grid sm:grid-cols-6",children:[t.jsx("div",{children:"No. Spm"}),t.jsxs("div",{className:"sm:col-span-5",children:[": ",s.no_spm]})]}),t.jsxs("div",{className:"text-muted-foreground sm:grid sm:grid-cols-6",children:[t.jsx("div",{children:"Tgl. Spm"}),t.jsxs("span",{className:"sm:col-span-2",children:[":  ",s.tgl_spm]}),t.jsx("span",{className:"sm:col-span-2 text-destructive",children:ze(s.hari_ke,s.status_berka_id)})]}),t.jsxs("div",{className:"flex items-center pt-3",children:[t.jsxs("div",{className:"flex",children:[t.jsx(Dt,{dataValue:s}),t.jsx(vt,{stateCatatans:Ne,user:r.user,updateJumlahCatatan:Ae,dataValue:s})]}),t.jsx(wt,{updateStatusBerkas:v,dataValue:s})]})]}),t.jsx(g,{className:"hidden 2xl:table-cell text-center whitespace-normal",children:s.nama_instansi}),t.jsx(g,{className:"text-center",children:s.nama_sumber_dana}),t.jsx(g,{children:t.jsx(ut,{status:s.status_berka_id})}),t.jsx(g,{children:t.jsx("div",{className:"flex justify-center",children:t.jsx(yt,{openModalCrud:Ve,openDialogDestroy:Qe,openDialogDetail:Xe,dataValue:s.id})})})]},l)):t.jsx(ye,{children:t.jsx(g,{colSpan:7,className:"font-normal",children:"Tidak ada data."})}),e[70]=r.user,e[71]=n?.meta.from,e[72]=p,e[73]=f,e[74]=Ne,e[75]=v,e[76]=R):R=e[76];let E;e[77]!==R?(E=t.jsxs(bt,{children:[be,t.jsx(kt,{children:R})]}),e[77]=R,e[78]=E):E=e[78];const Ce=n?.meta.from,Te=n?.meta.to,Be=n?.meta.total;let P;e[79]!==Ce||e[80]!==Te||e[81]!==Be?(P=t.jsxs("div",{className:"text-foreground text-sm",children:[Ce," sampai ",Te," dari total: ",Be]}),e[79]=Ce,e[80]=Te,e[81]=Be,e[82]=P):P=e[82];const Fe=n?.links,Ie=n?.meta;let V;e[83]!==Fe||e[84]!==Ie?(V=t.jsx("div",{className:"flex flex-1 flex-row-reverse",children:t.jsx(St,{links:Fe,meta:Ie})}),e[83]=Fe,e[84]=Ie,e[85]=V):V=e[85];let O;e[86]!==P||e[87]!==V?(O=t.jsxs("div",{className:"grid items-center auto-rows-min gap-4 md:grid-cols-2 py-4",children:[P,V]}),e[86]=P,e[87]=V,e[88]=O):O=e[88];let $;e[89]!==A||e[90]!==E||e[91]!==O?($=t.jsxs("div",{className:"min-h-screen p-4 flex-1 overflow-hidden bg-background shadow-sm rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:[A,pe,_e,E,O]}),e[89]=A,e[90]=E,e[91]=O,e[92]=$):$=e[92];let J;e[93]!==L||e[94]!==$?(J=t.jsx(nt,{className:"py-1",children:t.jsxs("div",{className:"flex flex-1 flex-col space-y-2 pl-2 mt-(--header-height) h-[calc(100svh-var(--header-height))]!",children:[L,$]})}),e[93]=L,e[94]=$,e[95]=J):J=e[95];let ke;return e[96]!==C||e[97]!==B||e[98]!==I||e[99]!==J?(ke=t.jsxs(t.Fragment,{children:[C,B,I,ue,fe,J]}),e[96]=C,e[97]=B,e[98]=I,e[99]=J,e[100]=ke):ke=e[100],ke};It.layout=a=>t.jsx(ot,{children:a});function Lt(){}export{It as default};
